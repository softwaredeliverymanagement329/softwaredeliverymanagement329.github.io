{"version":3,"file":"index-BIa-ZUZ3.js","sources":["../../storeService.js","../../storeElement.js","../../main.js"],"sourcesContent":["class StoreService {\n  constructor() {\n    this.useNetwork = false;\n    this.lambdas = {\n      getStores: 'https://l4jzevaddlpr53lxtup5sy3ve40geiyy.lambda-url.us-east-1.on.aws/',\n    };\n\n    this.localStores = { store: [] };\n  }\n\n  getStores(callback) {\n    if (this.useNetwork) {\n      this.fetchRequest(callback, 'GET', '/api/store');\n    } else if (this.lambdas.getStores) {\n      this.fetchRequest(callback, 'GET', this.lambdas.getStores);\n    } else {\n      callback(this.readLocalStores());\n    }\n  }\n\n  createStore(storeName, callback) {\n    if (this.useNetwork) {\n      this.fetchRequest(callback, 'POST', `/api/store/${storeName}`);\n    } else {\n      const newStore = { name: storeName, date: new Date().toLocaleString() };\n      callback(this.writeLocalStore(newStore));\n    }\n  }\n\n  readLocalStores() {\n    const store =\n      localStorage.getItem('store') ||\n      `{\"store\": [{ \"name\": \"Default Pizza Client localstorage\", \"date\": \"3/6/2024, 2:47:21 PM\" }]}`;\n    return JSON.parse(store);\n  }\n\n  writeLocalStore(newStore) {\n    const stores = { store: [...this.readLocalStores().store, newStore] };\n    localStorage.setItem('store', JSON.stringify(stores));\n    return stores;\n  }\n\n  async fetchRequest(callback, method, path, headers = {}, body = null) {\n    if (body) {\n      headers = { ...headers, 'Content-Type': 'application/json' };\n    }\n\n    const options = {\n      method: method,\n      headers: headers,\n      body: body ? JSON.stringify(body) : null,\n    };\n\n    const response = await fetch(path, options);\n    if (!response.ok) {\n      throw new Error(`Service request failed: ${response.status}`);\n    }\n\n    if (callback) {\n      const obj = await response.json();\n      callback(obj);\n    }\n  }\n}\n\nconst storeService = new StoreService();\nexport { storeService };\n","import './storeElement.css';\nimport { storeService } from './storeService.js';\n\nclass StoreElement extends HTMLElement {\n  constructor() {\n    self = super();\n\n    this.createAddInput();\n    this.createAddStoreButton();\n    this.createStoreTable();\n    storeService.getStores((data) => this.drawTable(data));\n  }\n\n  createAddInput() {\n    this.addStoreInput = self.appendChild(document.createElement('input'));\n    this.addStoreInput.setAttribute('type', 'text');\n    this.addStoreInput.setAttribute('placeholder', 'store name');\n  }\n\n  createAddStoreButton() {\n    const addBtn = self.appendChild(document.createElement('button'));\n    addBtn.textContent = 'Add';\n    addBtn.addEventListener('click', (e) => {\n      const storeName = this.addStoreInput.value;\n      if (storeName !== '') {\n        this.addStoreInput.value = '';\n        storeService.createStore(storeName, (data) => this.drawTable(data));\n      }\n    });\n  }\n\n  createStoreTable() {\n    const storeTable = self.appendChild(document.createElement('table'));\n\n    const headerRow = storeTable.appendChild(document.createElement('tr'));\n    const nameHeader = headerRow.appendChild(document.createElement('th'));\n    nameHeader.innerText = 'Name';\n    const dateHeader = headerRow.appendChild(document.createElement('th'));\n    dateHeader.innerText = 'Date';\n\n    this.tableBody = storeTable.appendChild(document.createElement('tbody'));\n  }\n\n  drawTable(data) {\n    if (data?.store.length) {\n      this.tableBody.innerHTML = '';\n      data.store.forEach((s) => {\n        const rowEl = document.createElement('tr');\n        const nameEl = document.createElement('td');\n        nameEl.innerText = s.name;\n        const dateEl = document.createElement('td');\n        dateEl.innerText = s.date;\n        rowEl.appendChild(nameEl);\n        rowEl.appendChild(dateEl);\n        this.tableBody.appendChild(rowEl);\n      });\n    } else {\n      this.tableBody.innerHTML = '<tr><td colspan=\"2\">No stores defined</td></tr>';\n    }\n  }\n}\n\ncustomElements.define('action-store', StoreElement);\n","import './style.css';\nimport './storeElement.js';\nimport gitHubLogo from '/github.svg';\n\ndocument.querySelector('#app').innerHTML = `\n  <div>\n    <a href=\"https://github.com/softwaredeliverymanagement329/actions-demo\" target=\"_blank\">\n      <img src=\"${gitHubLogo}\" class=\"logo\" alt=\"GitHub logo\" />\n    </a>\n    <h1>DevOps Demo</h1>\n    <action-store></action-store>\n    <p>\n      <a href=\"https://docs.github.com/en/actions/quickstart\" target=\"_blank\">\n        GitHub Actions Quickstart\n      </a>\n    </p>\n  </div>\n`;\n"],"names":["StoreService","callback","storeName","newStore","store","stores","method","path","headers","body","options","response","obj","storeService","StoreElement","data","addBtn","e","storeTable","headerRow","nameHeader","dateHeader","s","rowEl","nameEl","dateEl","gitHubLogo"],"mappings":"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"}